<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Split Layout</title>
<style>
    body, html {
        height: 100%;
        margin: 0;
        font-family: Arial, sans-serif;
    }

    .container {
        display: flex;
        height: 100%;
    }

    .left-section {
        flex: 70%;
        padding: 20px;
    }

    .right-section {
    flex: 30%;
    padding: 20px;
    border-left: 1px solid #ccc;
    display: flex;
    flex-direction: column;
    justify-content: flex-start; /* Align items at the top */
}


    .input-field {
        width: 85%;
        padding: 10px;
        margin-top: 10px;
        box-sizing: border-box;
    }

    .output-field {
        width: 95%;
        height: 90%;
        border: 1px solid #ccc;
        overflow-y: auto;
    }

    .checkbox-options {
        margin-bottom: 10px;
    }

    .enter-button {
        width: 10%;
    background-color: #007bff;
    color: #fff;
    border: none;
    cursor: pointer;
    margin-top: 10px; /* Add margin to separate button from input field */
}
.input-container {
    display: flex;
    padding: auto;
    height: 8%;
}

    .enter-button:hover {
        background-color: #0056b3;
    }.assistant {
        flex:1;
    display: flex;
    flex-direction: column;
    align-items: center; /* Center items horizontally */
    margin-bottom: 20px;
    border: 1px solid #ccc; /* Add border for visual separation */
    border-radius: 8px; /* Add border radius for rounded corners */
    padding: 10px; /* Add padding for spacing */
}

.assistant-name {
    width: 100%;
    font-weight: bold;
    margin-bottom: 10px;
    text-align: center; /* Center the text */
}

.assistant-details {
    display: flex;
    flex-direction: column;
    align-items: center; /* Center items horizontally */
}

.assistant-details img {
    width: 100px; /* Adjust the size as needed */
    height: 100px; /* Adjust the size as needed */
    margin-bottom: 10px; /* Add spacing between image and options */
    border-radius: 50%; /* Make the image round */
}

.options-list {
    list-style-type: none;
    padding: 0;
    text-align: center;
    display: flex;
}

.options-list li {
    margin-bottom: 5px;
}

.options-list li input[type="checkbox"] {
    margin-right: 5px; /* Add spacing between checkboxes */
}

.assistant.active {
    border-color: #007bff; /* Change border color when selected */
    box-shadow: 0 0 10px rgba(0, 123, 255, 0.5); /* Add shadow when selected */
}

.container-user {
        display: flex;
        flex-direction: row-reverse;
        align-items: flex-start;
    }

.container-assistant {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
}    
/* Styling for the message content */
.message {
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 10px;
    max-width: 70%;
    word-wrap: break-word; /* Wrap long words to avoid overflow */
    background-color: #f0f0f0; /* Light gray background */
}

/* Styling for the icon */
.icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
    overflow: hidden; /* Hide overflowing content */
}

.icon img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Maintain aspect ratio and cover the entire area */
}

/* Styling for the message container */
.message-container {
    display: flex;
    align-items: center;
}

/* Styling for user-specific elements */
.role-user .message {
    background-color: #d6eaf8; /* Light blue background for user messages */
}

.role-user .icon img {
    border: 2px solid #007bff; /* Blue border for user icon */
}

/* Styling for assistant-specific elements */
.role-assistant .message {
    background-color: #f0f0f0; /* Light gray background for assistant messages */
}

.role-assistant .icon img {
    border: 2px solid #ccc; /* Gray border for assistant icon */
}

.container-user {
    display: flex;
    flex-direction: row-reverse;
    align-items: flex-start;
}

.invisible-panel-user {
    display: flex;
    flex-direction: row-reverse;
    align-items: flex-start;
}

.invisible-panel-nonUser {
    display: flex;
    align-items: flex-start;
}

.container-assistant {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
}

.wrapper {
    flex-wrap: wrap;
    gap: 20px;
}



</style>
</head>
<body>
    <div class="container">
        <div class="left-section">
            <div id="outputField" class="output-field"></div>
            <div class="input-container">
                <input id="inputField" type="text" class="input-field" placeholder="Input Field">
                <button id="submitButton" class="enter-button">Enter</button>
            </div>
        </div>
        <div class="right-section">
            <div class="assistant">
                <div class="assistant-name">Assistant 1</div>
                <div class="assistant-details">
                    <img src="path_to_image">
                    <ul class="options-list">
                        <li><input type="checkbox"> Option 1</li>
                        <li><input type="checkbox"> Option 2</li>
                        <li><input type="checkbox"> Option 3</li>
                    </ul>
                </div>
            </div>
            <div class="assistant">
                <div class="assistant-name">Assistant 2</div>
                <div class="assistant-details">
                    <img src="path_to_image">
                    <ul class="options-list">
                        <li><input type="checkbox"> Option 1</li>
                        <li><input type="checkbox"> Option 2</li>
                        <li><input type="checkbox"> Option 3</li>
                    </ul>
                </div>
            </div>
            <div class="assistant">
                <div class="assistant-name">Assistant 3</div>
                <div class="assistant-details">
                    <img src="path_to_image">
                    <ul class="options-list">
                        <li><input type="checkbox"> Option 1</li>
                        <li><input type="checkbox"> Option 2</li>
                        <li><input type="checkbox"> Option 3</li>
                    </ul>
                </div>
            </div>
        </div>              
    </div>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
        function buildInvidiblePanel(role, wrapper) {
           
            const invisiblePanel = document.createElement('div');
            invisiblePanel.style.height = '20px'; // Set a specific height for the invisible panel

            if (role != 'user') {
                invisiblePanel.classList.add(`invisible-panel-nonUser`);
                const reloadButton = document.createElement('button');
                reloadButton.textContent = "Reload"; // Set the path to your modification icon
                reloadButton.style.display = 'none'; // Initially hide the modification icon
                reloadButton.addEventListener('click', () => {
                    console.log("reload");
                });
                invisiblePanel.appendChild(reloadButton);
                wrapper.addEventListener('mouseover', () => {
                    if (!editMode) {
                    reloadButton.style.display = 'block';
                    } // Show modification icon on mouseover
                });
                wrapper.addEventListener('mouseout', () => {
                    reloadButton.style.display = 'none'; // Hide modification icon on mouseout
                });
                return invisiblePanel;
            }

            invisiblePanel.classList.add(`invisible-panel-user`);
            const modificationIcon = document.createElement('button');
            modificationIcon.textContent = "Edit"; // Set the path to your modification icon
            modificationIcon.style.display = 'none'; // Initially hide the modification icon
            modificationIcon.addEventListener('click', () => {
                messageDiv.contentEditable = true; // Enable editing directly in the message div
                messageDiv.focus(); // Focus on the message div for editing
                saveButton.style.display = 'inline-block'; // Show Save button
                cancelButton.style.display = 'inline-block'; // Show Cancel button
                modificationIcon.style.display = 'none'; // Hide modification icon
                editMode = true;
            });

            editMode = false;
            const saveButton = document.createElement('button');
            saveButton.textContent = 'Save';
            saveButton.style.display = 'none'; // Initially hide the Save button
            saveButton.addEventListener('click', () => {
                messageDiv.blur();
                messageDiv.contentEditable = false;
                messageDiv.textContent = messageDiv.textContent.trim();
                saveButton.style.display = 'none'; // Hide Save button
                cancelButton.style.display = 'none'; // Hide Cancel button
                modificationIcon.style.display = 'block'; // Show modification icon
                editMode = false;
            });

            const cancelButton = document.createElement('button');
            cancelButton.textContent = 'Cancel';
            cancelButton.style.display = 'none'; // Initially hide the Cancel button
            cancelButton.addEventListener('click', () => {
                messageDiv.textContent = message; // Restore the original message
                messageDiv.blur(); 
                messageDiv.contentEditable = false; // Disable editing in the message div
                saveButton.style.display = 'none'; // Hide Save button
                cancelButton.style.display = 'none'; // Hide Cancel button
                modificationIcon.style.display = 'block'; // Show modification icon
                editMode = false;
            });

        invisiblePanel.appendChild(modificationIcon); // Append modification icon to the invisible panel
        invisiblePanel.appendChild(saveButton); // Append Save button to the invisible panel
        invisiblePanel.appendChild(cancelButton); // Append Cancel button to the invisible panel

        wrapper.addEventListener('mouseover', () => {
            if (!editMode) {
            modificationIcon.style.display = 'block';
            } // Show modification icon on mouseover
        });
        wrapper.addEventListener('mouseout', () => {
            modificationIcon.style.display = 'none'; // Hide modification icon on mouseout
        });
        return invisiblePanel;
        }
        function addMessage(message, role = 'assistant') {
            const messageDiv = document.createElement('div');
            messageDiv.textContent = message;
            messageDiv.classList.add('message', `role-${role}`);
            
            const iconImg = document.createElement('img');
            iconImg.src = role === 'user' ? 'path_to_user_icon.png' : 'path_to_assistant_icon.png';
            iconImg.alt = role === 'user' ? 'User Icon' : 'Assistant Icon';
            iconImg.classList.add('icon', `icon-${role}`);
            
            const messageContainer = document.createElement('div');
            messageContainer.classList.add('message-container', `container-${role}`);
            messageContainer.appendChild(iconImg);
            messageContainer.appendChild(messageDiv);


        const wrapper = document.createElement('div');
        wrapper.classList.add(`wrapper`);
        wrapper.appendChild(messageContainer);
        wrapper.appendChild(buildInvidiblePanel(role, wrapper));
        outputField.appendChild(wrapper);
    }

        document.getElementById('submitButton').addEventListener('click', function() {
        const userInput = document.getElementById('inputField');
        const outPutField = document.getElementById('outputField');
            


        function sendRequest() {
            const url = 'http://localhost:80/post_accident';
            const userInputValue = userInput.value;
            const requestData = { "user_input": userInputValue };
            userInput.value = '';
            addMessage(userInputValue, 'user');
            addMessage("debug");
            $.ajax({
                type: 'POST',
                url: url,
                data: JSON.stringify(requestData),
                contentType: 'application/json',
                success: function(data) {
                    addMessage(data.res);
                },
                error: function(xhr, status, error) {
                console.log(error);
                userInput.value = userInputValue;
                    }
            });
            }
            sendRequest();});
            document.addEventListener('DOMContentLoaded', function() {
    const assistants = document.querySelectorAll('.assistant');

    assistants.forEach(assistant => {
        assistant.addEventListener('click', function() {
            // Remove active class from all assistants
            assistants.forEach(a => a.classList.remove('active'));
            
            // Add active class to the clicked assistant
            this.classList.add('active');
            
            // Get the name of the clicked assistant and log it
            const assistantName = this.getAttribute('data-name');
            console.log('Selected assistant:', assistantName);
        });
    });
});


        
    </script>
</body>
</html>
